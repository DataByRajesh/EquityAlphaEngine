# Equity Alpha Engine Environment Configuration
# This file contains all possible environment variables used in the application.
# Set these values according to your deployment environment (local, GCP, etc.).
# For production, use secrets management (e.g., GCP Secret Manager) instead of plain text.

# ------------------------------------------------------------------------------
# Directory Configuration
# ------------------------------------------------------------------------------
# Directories for data, cache, and logs. Defaults are relative to data_pipeline/.
DATA_DIR=data_pipeline/data
CACHE_DIR=data_pipeline/cache
LOG_DIR=data_pipeline/logs

# ------------------------------------------------------------------------------
# Google Cloud Platform (GCP) Configuration
# ------------------------------------------------------------------------------
# GCP Project ID for services like Cloud SQL, Cloud Storage, etc.
GCP_PROJECT_ID=equity-alpha-engine-alerts

# GCP Region for Cloud SQL instance (default: us-central1)
GCP_REGION=us-central1

# Cloud SQL Instance Name (format: project:region:instance)
CLOUD_SQL_INSTANCE_NAME=equity-alpha-engine-alerts:us-central1:equity-db

# ------------------------------------------------------------------------------
# Database Configuration
# ------------------------------------------------------------------------------
# Database URL for PostgreSQL connection (use secrets in production)
#DATABASE_URL=postgresql://username:password@localhost:5432/equity_db

# ------------------------------------------------------------------------------
# Gmail API Configuration
# ------------------------------------------------------------------------------
# Path to Gmail OAuth credentials file
#GMAIL_CREDENTIALS_FILE=credentials.json

# Path to Gmail OAuth token file
#GMAIL_TOKEN_FILE=token.json

# ------------------------------------------------------------------------------
# Cache Configuration (GCS - Google Cloud Storage)
# ------------------------------------------------------------------------------
# GCS Bucket for caching data
CACHE_GCS_BUCKET=your-cache-bucket

# Prefix for cache files in GCS bucket
CACHE_GCS_PREFIX=

# ------------------------------------------------------------------------------
# API and Application Configuration
# ------------------------------------------------------------------------------
# API URL for the FastAPI service (used by Streamlit app)
API_URL=https://equity-api-248891289968.europe-west2.run.app

# ------------------------------------------------------------------------------
# Retry and Rate Limiting Configuration
# ------------------------------------------------------------------------------
# Maximum retry attempts for API calls
MAX_RETRIES=5

# Exponential backoff multiplier
BACKOFF_FACTOR=2

# Initial delay (seconds) before retrying
INITIAL_DELAY=1

# Delay (seconds) between API calls to avoid rate limits
RATE_LIMIT_DELAY=1.5

# ------------------------------------------------------------------------------
# Concurrency Configuration
# ------------------------------------------------------------------------------
# Maximum threads for parallel API calls (default scales with CPU cores)
MAX_THREADS=25

# ------------------------------------------------------------------------------
# Cache Expiry Configuration
# ------------------------------------------------------------------------------
# Cache expiry time in minutes (24 hours)
CACHE_EXPIRY_MINUTES=1440

# ------------------------------------------------------------------------------
# Yfinance Configuration
# ------------------------------------------------------------------------------
# Disable yfinance cache (true/false)
YF_DISABLE_CACHE=true

# Directory for yfinance cache
YF_CACHE_DIR=data_pipeline/cache/yfinance

# ------------------------------------------------------------------------------
# Logging Configuration
# ------------------------------------------------------------------------------
# Log level: CRITICAL, ERROR, WARNING, INFO, DEBUG
LOG_LEVEL=INFO



# Environment Variables for Equity Alpha Engine
# Copy this file to .env and fill in your actual values

# Database Configuration
DATABASE_URL="postgresql+pg8000://postgres:Smart!98@34.39.5.6:5432/equity_db"

# API Keys
QUANDL_API_KEY="pXBknNEt9LEV6DRBnfhs"

# GCP Configuration
USE_GCP_SECRET_MANAGER="true"
GCP_PROJECT_ID="equity-alpha-engine-alerts"
GOOGLE_APPLICATION_CREDENTIALS="path/to/service_account.json"
GCP_REGION="europe-west2"
CLOUD_SQL_INSTANCE_NAME="equity-alpha-engine-alerts:europe-west2:equity-db"

# Gmail Configuration
GMAIL_CREDENTIALS_FILE="credentials.json"
GMAIL_TOKEN_FILE="token.json"
GMAIL_CREDENTIALS_GCS_PATH="gs://your-bucket/credentials.json"
GMAIL_CREDENTIALS_SECRET_NAME="GMAIL_CLIENT_SECRET"
GMAIL_SERVICE_ACCOUNT_KEY_PATH="path/to/service_account_key.json"
GMAIL_USER_EMAIL="raj.analystdata@gmail.com"
GMAIL_SERVICE_ACCOUNT_SECRET_NAME="GMAIL_SERVICE_ACCOUNT_KEY"

# Cache Configuration
CACHE_GCS_BUCKET="equity-bucket"
CACHE_GCS_PREFIX=""

# Performance and Timeout Settings
MAX_THREADS=20
HISTORICAL_DATA_TIMEOUT=600
FUNDAMENTAL_REQUEST_TIMEOUT=30
MAX_CONCURRENT_REQUESTS=10
CIRCUIT_BREAKER_FAILURE_THRESHOLD=20
CIRCUIT_BREAKER_TIMEOUT=300

# YFinance Configuration
YF_DISABLE_CACHE=true
YF_CACHE_DIR=cache/yfinance

# Logging
LOG_LEVEL=INFO

# UI/Headless Mode
HEADLESS=false
DISPLAY=:0

# Build/Deployment (usually set by CI/CD)
#BUILD_SHA="your_build_sha"
#IMAGE_TAG="your_image_tag"
#IMAGE_URI="your_image_uri"
AR_REPO="equity-images"
UI_CLOUD_RUN_SERVICE="streamlit-app"
API_CLOUD_RUN_SERVICE="equity-api"
API_URL="https://equity-api-248891289968.europe-west2.run.app"
